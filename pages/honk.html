<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sound Effect Button</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #333333;
            font-family: Arial, sans-serif;
        }
        
        #soundButton {
            width: 120px;
            height: 120px;
            font-size: 20px;
            font-weight: bold;
            background: linear-gradient(145deg, #FFB347, #FF8C00);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 
                0 8px 16px rgba(0,0,0,0.3),
                0 4px 8px rgba(0,0,0,0.2),
                inset 0 2px 4px rgba(255,255,255,0.3);
            transition: all 0.1s ease;
        }
        
        #soundButton:active {
            transform: translateY(4px);
            background: linear-gradient(145deg, #E6751A, #CC7000);
            box-shadow: 
                0 2px 4px rgba(0,0,0,0.3),
                0 1px 2px rgba(0,0,0,0.2),
                inset 0 8px 16px rgba(0,0,0,0.3),
                inset 0 2px 8px rgba(0,0,0,0.4);
        }
    </style>
</head>
<body>
    <button id="soundButton">honk</button>
    
    <script>
        const button = document.getElementById('soundButton');
        
        let audioBuffer = null;
        let audioContext = null;
        
        // Initialize audio context and buffer for better mobile performance
        async function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const response = await fetch('assets/honk-sound.mp3');
                const arrayBuffer = await response.arrayBuffer();
                audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
            } catch (error) {
                console.log('Web Audio API not supported, falling back to HTML Audio');
            }
        }
        
        function playSound() {
            if (audioContext && audioBuffer) {
                const source = audioContext.createBufferSource();
                source.buffer = audioBuffer;
                source.connect(audioContext.destination);
                source.start();
            } else {
                const audio = new Audio('../assets/honk-sound.mp3');
                audio.play().catch(error => {
                    console.log('Error playing sound:', error);
                });
            }
        }
        
        let audioInitialized = false;
        function ensureAudioInit() {
            if (!audioInitialized) {
                initAudio();
                audioInitialized = true;
            }
        }
        
        button.addEventListener('touchstart', function(e) {
            e.preventDefault(); // Prevent click event from also firing
            ensureAudioInit();
            playSound();
        });
        button.addEventListener('click', function() {
            ensureAudioInit();
            playSound();
        });

        document.addEventListener('keydown', function(event) {
            if (event.code === 'Space') {
                event.preventDefault();
                playSound();
            }
        });
    </script>
</body>
</html>